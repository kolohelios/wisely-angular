section
  .container
    .row
      .col-xs-12.text-center
        header
          h3 Collections
        section
          .row
            section(ng-hide='createOrEditCollection')
              button(ng-click='createButton()') Create a New Collection
        section(ng-show='createOrEditCollection')
          .row
            .col-xs-12.col-sm-6
              h4(ng-hide='editCollection') Create a Collection
              h4(ng-show='editCollection') Edit Collection
              form(name='newCollectionForm')
                .form-group
                  label(for='name') Name
                  input.form-control.input-sm(type='text' name='name' ng-model='collection.name' placeholder='Collection name...')
                .form-group
                  label(for='costdriver') Cost Driver
                  input.form-control.input-sm(type='text' name='costdriver' ng-model='collection.costDriver' placeholder='Cost driver...')
                .form-group
                  label(for='rooms')
                  select.input-sm.select2-choice(ng-model='room' name='rooms')
                    option(ng-repeat='room in config.rooms') {{room}}
                button.btn.btn-inverse.btn-block(ng-click='addRoom(room)') Add Room
            .col-xs-12.col-sm-6
              h5 Rooms
              ul.list-group
                li.list-group-item(ng-repeat='room in collection.rooms | orderBy: room') {{room}}
          .row
            .col-xs-12
              br
              button(ng-hide='editCollection' ng-click='create(collection)').btn.btn-inverse.btn-block Create Collection
              button(ng-show='editCollection' ng-click='save(collection)').btn.btn-inverse.btn-block Save Collection
        section
          table.table.table-striped
            thead
              tr
                th(ng-click='sort("name")')
                  i.fa.fa-sort-desc(ng-show='sortReverse && sortColumn === "name"')
                  i.fa.fa-sort-asc(ng-show='!sortReverse && sortColumn === "name"')
                  span &nbsp; Name
                th(ng-click='sort("costDriver")')
                  i.fa.fa-sort-desc(ng-show='sortReverse && sortColumn === "costDriver"')
                  i.fa.fa-sort-asc(ng-show='!sortReverse && sortColumn === "costDriver"')
                  span &nbsp; Cost Driver
                th Rooms
                th(ng-click='sort("items")')
                  i.fa.fa-sort-desc(ng-show='sortReverse && sortColumn === "items"')
                  i.fa.fa-sort-asc(ng-show='!sortReverse && sortColumn === "items"')
                  span &nbsp; Items
                th Edit
                th Delete
            tbody
              tr(ng-repeat='collection in collections | orderBy : sortColumn : sortReverse' ng-click='showCollection(collection._id)')
                td {{collection.name}}
                td {{collection.costDriver}}
                td: ul
                  li(ng-repeat='room in collection.rooms | orderBy: room') {{room}}
                td {{collection.items.length}}
                td: button.btn.btn-inverse.btn-block.btn-sm(ng-click='edit(collection); $event.stopPropagation()'): i.fa.fa-pencil
                td: button.btn.btn-inverse.btn-block.btn-sm(ng-click='remove(collection); $event.stopPropagation()'): i.fa.fa-trash
            
